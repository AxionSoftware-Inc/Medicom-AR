<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Native AR (Aniq ishlaydi)</title>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>

    <style>
        body { margin: 0; padding: 0; background-color: #222; font-family: sans-serif; }
        
        /* Model Viewer oynasi */
        model-viewer {
            width: 100%; height: 80vh;
            background-color: #222; /* Oq fonni yo'qotdik */
        }

        /* Biz yasagan maxsus tugma */
        .custom-ar-button {
            position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%);
            background-color: #28a745; color: white;
            padding: 15px 40px; border-radius: 50px; border: none;
            font-size: 20px; font-weight: bold;
            box-shadow: 0 0 20px rgba(40, 167, 69, 0.6);
            display: flex; align-items: center; justify-content: center;
            z-index: 100; cursor: pointer; text-decoration: none;
        }

        .custom-ar-button:active { transform: translateX(-50%) scale(0.95); }
        
        .hint {
            color: #aaa; text-align: center; margin-top: 10px;
        }
    </style>
</head>
<body>

    <p class="hint">Pastdagi yashil tugmani bosing ðŸ‘‡</p>

    <model-viewer 
        src="https://modelviewer.dev/shared-assets/models/Astronaut.glb"
        ios-src="https://modelviewer.dev/shared-assets/models/Astronaut.usdz"
        alt="Astronavt"
        ar
        ar-modes="scene-viewer webxr quick-look"
        camera-controls
        auto-rotate
        shadow-intensity="1">

        <button slot="ar-button" class="custom-ar-button">
            KAMERADA KO'RISH ðŸ“¸
        </button>

    </model-viewer>

    <script>
        const viewer = document.querySelector("model-viewer");
        
        // Agar tugma bosilganda AR ochilmasa, demak telefon qo'llamaydi
        viewer.addEventListener('ar-status', (event) => {
            if(event.detail.status === 'failed'){
                alert("Kechirasiz, telefoningizning Google Play Services AR tizimi yangilanmagan.");
            }
        });
    </script>
</body>
</html>